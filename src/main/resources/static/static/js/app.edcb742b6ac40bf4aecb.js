webpackJsonp([1],{"/uEZ":function(t,e){},AIrM:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("//Fk"),n=s.n(a),o=s("7+uW"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"title",staticStyle:{"vertical-align":"center",height:"30px"}},[e("img",{attrs:{src:s("ZURh"),height:"30px"}}),this._v(" "),e("span",{staticStyle:{"line-height":"30px",height:"30px",overflow:"hidden"}},[this._v("Script Executor")])])])}]};var l={name:"App",components:{Header:s("VU/8")({name:"Header",data:function(){return{}}},i,!1,function(t){s("AIrM")},"data-v-440dad12",null).exports},data:function(){return{data:[],logTitle:"",logId:0,logVisible:!1,logs:[],interval:"",enableScroll:!0,groups:[]}},mounted:function(){var t=this;this.axios.get("tasks").then(function(e){t.data=e.data.data;var s=/(http:\/\/)?([A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*)/g;for(var a in t.data)for(var n in t.groups.push(t.data[a].group),t.data[a].tasks)t.data[a].tasks[n].desc=t.data[a].tasks[n].desc.replace(s,function(t,e,s){return'<a href="http://'+s+'">'+t+"</a>"})})},methods:{run:function(t){var e=this;this.axios.get("exec?id="+t).then(function(s){for(var a in e.$message({message:s.data.message,type:"success",duration:5e3}),e.data)for(var n in e.data[a].tasks)e.data[a].tasks[n].id==t&&(e.data[a].tasks[n].lastRunTime=s.data.runTime)})},handleLogClose:function(){this.logVisible=!1,this.logTitle="",this.logId=0,this.logs=[],this.enableScroll=!0,clearInterval(this.interval)},openLogs:function(t){this.getLogs(t);var e=this;this.interval=setInterval(function(){e.getLogs(t)},1e3),this.logTitle=t.name+" - Logs",this.logId=t.id,this.logVisible=!0},getLogs:function(t){var e=this;this.axios.get("logs?id="+t.id).then(function(t){e.logs=t.data;var s=document.querySelector(".log_end");null!=s&&e.enableScroll&&s.scrollIntoView({block:"start",behavior:"smooth"})})},scroll:function(){var t,e,s=document.getElementById("content");t=s.scrollTop,e=s.scrollHeight-s.offsetHeight,this.enableScroll=t>=e},allLogs:function(){window.open("allLogs?id="+this.logId)}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Header",{staticStyle:{"margin-bottom":"10px"}}),t._v(" "),s("div",{staticStyle:{"background-color":"rgba(137,138,116,0.29)",width:"100%",height:"1px"}}),t._v(" "),s("div",{staticStyle:{"margin-top":"10px","vertical-align":"top"}},[s("el-collapse",{model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}},t._l(t.data,function(e,a){return s("el-collapse-item",{key:a,attrs:{title:e.group,name:e.group}},t._l(e.tasks,function(e,a){return s("el-card",{key:a,staticClass:"card",attrs:{shadow:"hover"}},[s("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n            "+t._s(e.name)+"\n            "),s("div",{staticStyle:{float:"right","font-size":"15px"}},[s("div",[s("el-button",{attrs:{icon:"el-icon-document",size:"small"},on:{click:function(s){t.openLogs(e)}}},[t._v("Logs\n              ")]),t._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-s-promotion",size:"small"},on:{click:function(s){t.run(e.id)}}},[t._v("Run\n              ")])],1)])]),t._v(" "),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(e.desc)}}),t._v(" "),s("el-divider"),t._v(" "),null!=e.lastRunTime?s("div",{staticClass:"lastRunTime desc",staticStyle:{float:"right"}},[s("i",{staticClass:"el-icon-timer"}),t._v(" "+t._s(e.lastRunTime))]):t._e()],1)}),1)}),1)],1),t._v(" "),s("el-dialog",{attrs:{title:t.logTitle,visible:t.logVisible,width:"80%","destroy-on-close":"","before-close":t.handleLogClose},on:{"update:visible":function(e){t.logVisible=e}}},[s("pre",{attrs:{id:"content"},on:{scroll:function(e){t.scroll()}}},[t._v("      "),t._l(t.logs,function(e,a){return s("div",{key:a,class:a===t.logs.length-1?"log_end":"log",staticStyle:{"margin-top":"2px","margin-bottom":"2px"},domProps:{innerHTML:t._s(e)}},[t._v("\n      ")])}),t._v("\n    ")],2),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(e){t.allLogs()}}},[t._v("Full Log")]),t._v(" "),s("el-button",{attrs:{size:"small"},on:{click:t.handleLogClose}},[t._v("Close")])],1)])],1)},staticRenderFns:[]};var c=s("VU/8")(l,r,!1,function(t){s("/uEZ")},null,null).exports,d=s("zL8q"),u=s.n(d),g=s("mtWM"),p=s.n(g);o.default.use(u.a),o.default.config.productionTip=!1;p.a.defaults.baseURL="public/api",p.a.defaults.withCredentials=!0,o.default.prototype.axios=p.a,p.a.interceptors.response.use(function(t){return t},function(t){return 500==t.response.data.status&&o.default.prototype.$notify({title:"Error",message:t.response.data.message,type:"error"}),n.a.reject(t)}),new o.default({el:"#app",components:{App:c},template:"<App/>"})},ZURh:function(t,e,s){t.exports=s.p+"static/img/favicon.5bde6bf.png"}},["NHnr"]);
//# sourceMappingURL=app.edcb742b6ac40bf4aecb.js.map